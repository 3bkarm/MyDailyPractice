## [Maximum Frequency of an Element After Performing Operations I](https://leetcode.com/problems/maximum-frequency-of-an-element-after-performing-operations-i?envType=daily-question&envId=2025-10-21)
```java
class Solution {
    public int maxFrequency(int[] nums, int k, int numOperations) {
        ArrayList<int[]> line = new ArrayList<>();
        for (int i = 0; i < nums.length; ++i) {
            line.add(new int[]{ nums[i] - k, 1, 1 });
            line.add(new int[]{ nums[i], -1, 0 });
            line.add(new int[]{ nums[i] + 1, 1, 0 });
            line.add(new int[]{ nums[i] + k + 1, -1, -1 });
        }
        int ans = 0, ix = 0, count = 0, cost = 0;
        line.sort( (a, b) -> a[0] - b[0] );
        while ( ix < line.size() ) {
            int move = ix, add = 0;
            while ( move < line.size() && line.get(ix)[0] == line.get(move)[0] ) {
                count += line.get(move)[2];
                cost += line.get(move)[1];
                ++move;
            }
            int exc = Math.max(0, cost - numOperations);
            ans = Math.max(ans, count - exc);
            ix = move;
        }
        return ans;
    }
}
```
