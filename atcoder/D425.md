## [Ulam-Warburton Automaton](https://atcoder.jp/contests/abc425/tasks/abc425_d)
A tricky problem to implement
```cpp
#include <bits/stdc++.h>

using namespace std;

#define Long long long
#define bint __int128
#define _3bkarm cin.tie(NULL); cout.tie(NULL); ios::sync_with_stdio(false);

void getShitDone() {
    int n, m;
    cin >> n >> m;

    int ans = 0;
    queue< array<int, 2> > black;
    set< array<int, 3> > white;
    vector< vector<int> > freq( n, vector<int>(m) );
    for (int i = 0; i < n; ++i) {
        for (int j = 0; j < m; ++j) {
            char ch;
            cin >> ch;
            if (ch == '.') {
                white.insert({ 0, i, j });
            } else {
                ++ans;
                black.push({ i, j });
            }
        }
    }

    int dx[] = { 0, 0, -1, 1 };
    int dy[] = { -1, 1, 0, 0 };

    while ( not black.empty() ) {
        while ( not black.empty() ) {
            auto [i, j] = black.front();
            black.pop();
            for (int move = 0; move < 4; ++move) {
                int toi = i + dx[move];
                int toj = j + dy[move];
                if ( toi >= 0 and toj >= 0 and toi < n and toj < m and white.count({ freq[toi][toj], toi, toj }) ) {
                    white.erase({ freq[toi][toj], toi, toj });
                    ++freq[toi][toj];
                    white.insert({ freq[toi][toj], toi, toj });
                }
            }
        }

        while ( not white.empty() ) {
            auto [adj, i, j] = *prev( white.end() );
            if (adj == 0) {
                break;
            }
            white.erase( prev( white.end() ) );
            if (adj == 1) {
                ++ans;
                black.push({ i, j });
            }
        }
    }

    cout << ans;
}

signed main() {
    _3bkarm

    int ts = 1;
//    cin >> ts;
    while (ts--) {
        getShitDone();
        if (ts != 0) cout << '\n';
    }

    return 0;
}
```
